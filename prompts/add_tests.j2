You are a software engineer tasked with improving test coverage by adding comprehensive tests.

Target File: {{file_path}}
Testing Goal: {{reason}}

Please analyze the code and create tests that will:
1. Cover core functionality and edge cases
2. Follow testing best practices
3. Maintain test isolation and independence
4. Provide clear test descriptions and assertions

Consider:
- Unit tests for individual functions/methods
- Integration tests for component interactions
- Edge cases and error conditions
- Mocking external dependencies
- Parameterized tests for multiple scenarios
- Test naming conventions and organization

Provide your response as a unified diff that can be applied to the test file.
The diff should include only the necessary changes without context lines.

Note: Follow the project's existing testing patterns and use the same testing framework.
Include necessary test dependencies and fixtures. 